utility function for version four